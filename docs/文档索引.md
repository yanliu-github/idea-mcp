# IntelliJ IDEA MCP 服务器 - 文档索引

## 文档信息

- **文档版本**: v1.0
- **创建日期**: 2025-11-13
- **文档状态**: 文档导航
- **项目名称**: IDEA MCP Server

---

## 📚 文档导航

### 1. 核心文档 (必读)

#### 1.1 需求文档.md
**用途**: 项目需求和功能定义

**内容**:
- 项目背景和目标
- 完整的功能需求 (重构、导航、分析、调试等)
- 非功能需求 (性能、安全、兼容性)
- 接口需求 (MCP协议、HTTP API)
- 完整错误码定义 ✨

**阅读对象**: 所有团队成员

**链接**: [需求文档.md](./需求文档.md)

---

#### 1.2 架构文档.md
**用途**: 系统架构和技术设计

**内容**:
- 三层架构设计 (AI工具层 → MCP Server层 → IDEA Plugin层)
- 通信协议设计 (MCP stdio + HTTP REST)
- **HTTP Server 启动策略** ✨ (IDEA启动后自动启动)
- **stdio 通信实现** ✨ (TypeScript示例)
- 数据模型设计
- 核心流程设计 (重构、调试、错误处理)
- 安全架构
- 性能优化设计
- 部署架构

**阅读对象**: 开发人员、架构师

**链接**: [架构文档.md](./架构文档.md)

---

#### 1.3 实现任务文档.md
**用途**: 开发任务清单和进度跟踪

**内容**:
- **执行策略说明** ✨ (Phase优先级、测试策略)
- **关键依赖关系** ✨ (串行依赖和并行执行)
- Phase 1-5 详细任务列表
- 任务状态标识 (`[ ]` `[x]` `[~]` `[-]`)
- 任务统计和完成率

**阅读对象**: 开发人员、项目经理

**链接**: [实现任务文档.md](./实现任务文档.md)

**重要提示**: 每完成一项任务立即更新状态 ✅

---

### 2. 配置和环境文档

#### 2.1 开发环境配置指南.md
**用途**: 开发环境搭建指南

**内容**:
- 系统要求和硬件要求
- 必需软件安装 (JDK 17, Node.js 18, Git, Gradle)
- IDE 安装和配置 (IntelliJ IDEA, VSCode)
- 克隆和初始化项目
- 网络配置 (Gradle镜像、npm镜像)
- 开发环境验证
- 开发工具配置 (代码格式化、调试)
- 常见问题排查

**阅读对象**: 新加入的开发人员

**链接**: [开发环境配置指南.md](./开发环境配置指南.md)

**快速开始**: 参见第7、8、11节

---

#### 2.2 Gradle配置示例.md
**用途**: Gradle 构建配置完整示例

**内容**:
- Monorepo 项目结构
- **根项目配置** (settings.gradle.kts, build.gradle.kts, gradle.properties)
- **IDEA Plugin 模块配置** (build.gradle.kts, plugin.xml 完整示例)
- Gradle Wrapper 配置
- 常用 Gradle 命令
- IDEA 集成配置
- 发布配置

**阅读对象**: 开发人员

**链接**: [Gradle配置示例.md](./Gradle配置示例.md)

**重要**: 可直接复制使用的配置文件 ✨

---

### 3. API 和通信文档

#### 3.1 API端点清单.md
**用途**: 完整的 HTTP API 端点文档

**内容**:
- **34 个 API 端点详细定义** ✨
- 系统管理 API (健康检查、项目信息)
- 重构 API (重命名、提取方法等 7个端点)
- 导航 API (查找用途、跳转定义等 5个端点)
- 代码分析 API (代码检查、错误分析等)
- 调试 API (断点管理、表达式计算等 9个端点)
- 代码生成 API (Getter/Setter等 4个端点)
- 搜索 API (全局搜索、文本搜索等 3个端点)
- 项目管理 API (构建、测试等)
- 代码格式化 API
- **完整错误码定义** ✨ (26个错误码)
- curl 测试示例

**阅读对象**: 所有开发人员、API 使用者

**链接**: [API端点清单.md](./API端点清单.md)

**快速查找**: 使用 Ctrl+F 搜索端点名称

---

#### 3.2 stdio通信示例.md
**用途**: MCP stdio 通信实现详解

**内容**:
- **stdio 通信原理** (stdin/stdout/stderr)
- MCP 协议基础 (JSON-RPC 2.0)
- **TypeScript 完整实现示例** ✨
  - index.ts (MCP Server 入口)
  - ideaClient.ts (HTTP 客户端)
  - refactoring.ts (工具定义和执行)
- 消息流示例 (初始化、列出工具、调用工具)
- 本地测试方法 (手动测试、MCP Inspector)
- 与 Claude Code 集成配置
- 错误处理和调试技巧

**阅读对象**: MCP Server 开发人员

**链接**: [stdio通信示例.md](./stdio通信示例.md)

**重要**: 包含完整可运行的代码示例 ✨

---

### 4. 测试文档

#### 4.1 测试计划.md
**用途**: 完整的测试策略和计划

**内容**:
- 测试概述和策略 (金字塔测试策略)
- **测试执行策略** ✨ (Phase 1-5 分阶段测试)
- 单元测试 (JUnit 5 + Mockito, 示例代码)
- 集成测试 (HTTP API 测试、重构流程测试)
- E2E 测试 (端到端场景、手动测试清单)
- 性能测试 (响应时间目标、并发测试)
- 安全测试 (认证、授权、漏洞扫描)
- 回归测试
- 测试自动化 (CI/CD 集成)
- 缺陷管理和测试报告

**阅读对象**: 开发人员、测试人员、QA

**链接**: [测试计划.md](./测试计划.md)

**快速开始**: 参见第2、3节

---

### 5. 补充文档

#### 5.1 README.md
**用途**: 项目概述和快速开始

**内容**:
- 项目简介和核心价值
- 项目架构图
- 功能特性（Phase 1-4）
- 快速开始指南
- 开发指南
- 文档导航
- 技术栈
- 许可证和联系方式

**阅读对象**: 所有用户、新开发者

**链接**: [README.md](../README.md)

**状态**: ✅ 已完成

---

#### 5.2 快速开始指南.md
**用途**: 5分钟快速上手指南

**内容**:
- 前提条件检查
- 5步快速启动流程
- 核心功能演示
- 完整功能列表
- 常见问题解答
- 成功案例

**阅读对象**: 新用户、快速体验者

**链接**: [快速开始指南.md](./快速开始指南.md)

**状态**: ✅ 已完成

---

#### 5.3 CHANGELOG.md
**用途**: 版本变更历史记录

**内容**:
- 版本发布记录（遵循 Keep a Changelog 格式）
- Phase 1-4 功能完成记录
- 技术亮点总结
- 版本计划
- 贡献指南

**阅读对象**: 所有团队成员、用户

**链接**: [CHANGELOG.md](../CHANGELOG.md)

**状态**: ✅ 已完成

---

#### 5.4 CLAUDE.md
**用途**: AI 助手（Claude Code）开发指南

**内容**:
- 项目概述和架构
- 开发命令和工具
- 核心设计模式
- 任务管理规范
- 测试策略
- 重要约定和注意事项

**阅读对象**: 使用 Claude Code 进行开发的团队成员

**链接**: [CLAUDE.md](../CLAUDE.md)

**状态**: ✅ 已完成

---

## 📖 文档阅读路径

### 路径 1: 新团队成员入门

1. 阅读 **快速开始指南.md** (5分钟快速了解项目) ⭐
2. 阅读 **README.md** (项目概述)
3. 阅读 **需求文档.md** (了解项目目标和功能)
4. 阅读 **架构文档.md** (理解系统架构)
5. 按照 **开发环境配置指南.md** 搭建环境
6. 查看 **实现任务文档.md** (了解当前进度)
7. 参考 **Gradle配置示例.md** 初始化项目
8. 开始开发,参考 **API端点清单.md** 和 **stdio通信示例.md**

**预计时间**: 1-2 天

**快速体验**: 仅需步骤 1-2 + 5 (约 30 分钟)

---

### 路径 2: 开发 IDEA Plugin

1. 阅读 **架构文档.md** (2.3 IDEA Plugin 层)
2. 参考 **Gradle配置示例.md** 配置项目
3. 查看 **API端点清单.md** (了解需要实现的端点)
4. 参考 **测试计划.md** (第3节) 编写单元测试
5. 参考 **实现任务文档.md** (Phase 1-4) 逐步实现

**关键文档**: 架构文档、API端点清单、测试计划

---

### 路径 3: 开发 MCP Server

1. 阅读 **架构文档.md** (2.2 MCP Server 层)
2. 详细阅读 **stdio通信示例.md** (完整实现)
3. 查看 **API端点清单.md** (了解要调用的 HTTP 端点)
4. 参考 **实现任务文档.md** (1.7 MCP Server 实现)
5. 配置 Claude Code 集成

**关键文档**: stdio通信示例、API端点清单

---

### 路径 4: 测试和质量保证

1. 阅读 **测试计划.md** (完整测试策略)
2. 参考 **API端点清单.md** (API 测试用例)
3. 查看 **实现任务文档.md** (任务完成进度)
4. 执行测试清单
5. 提交缺陷报告

**关键文档**: 测试计划、API端点清单

---

### 路径 5: 项目经理/架构师

1. 阅读 **需求文档.md** (项目范围和验收标准)
2. 阅读 **架构文档.md** (系统架构和技术选型)
3. 查看 **实现任务文档.md** (任务分配和进度)
4. 参考 **测试计划.md** (质量保证策略)

**关键文档**: 需求文档、架构文档、实现任务文档

---

## 🔄 文档更新规范

### 何时更新文档

| 变更类型 | 需要更新的文档 | 责任人 |
|---------|---------------|--------|
| 新增功能需求 | 需求文档、实现任务文档 | 产品经理 |
| 架构变更 | 架构文档 | 架构师 |
| API 变更 | API端点清单、stdio通信示例 | 开发人员 |
| 完成任务 | 实现任务文档 (标记为 `[x]`) | 开发人员 |
| 测试策略变更 | 测试计划 | 测试负责人 |
| 配置变更 | Gradle配置示例、开发环境配置指南 | 开发人员 |

### 文档更新流程

1. 代码变更提交前,先更新相关文档
2. 在 PR 中注明文档变更
3. 代码审查时同时审查文档更新
4. 文档变更需要更新版本号和更新日志

---

## 🎯 关键信息快速查找

### 技术选型

- **IDEA Plugin**: Java 17 + IntelliJ Platform SDK 2024.1 + Undertow 2.3
- **MCP Server**: TypeScript 5.3 + Node.js 18 + @modelcontextprotocol/sdk
- **项目结构**: Monorepo (Gradle)
- **包名**: com.ly.ideamcp
- **HTTP 端口**: 58888 (默认)

**参见**: [需求文档.md 第5节](./需求文档.md#5-约束条件)

---

### HTTP Server 启动

- **启动时机**: IDEA 启动后自动启动 ✨
- **用户控制**: 可手动停止/重启
- **配置位置**: Settings > Tools > IDEA MCP Server

**参见**: [架构文档.md 2.3.1.1节](./架构文档.md#2311-http-server-启动策略)

---

### MCP 通信

- **传输方式**: stdio (标准输入输出)
- **协议**: JSON-RPC 2.0
- **消息格式**: 每条消息占一行,以 `\n` 结尾

**参见**: [stdio通信示例.md](./stdio通信示例.md)

---

### API 端点

- **Base URL**: `http://localhost:58888/api/v1`
- **认证**: Bearer Token (可选)
- **格式**: JSON

**参见**: [API端点清单.md](./API端点清单.md)

---

### 错误码

- **4xx**: 客户端错误 (18个)
- **5xx**: 服务端错误 (10个)

**参见**:
- [需求文档.md 4.5节](./需求文档.md#45-完整错误码定义)
- [API端点清单.md 第11节](./API端点清单.md#11-错误码定义)

---

### 测试策略

- **单元测试覆盖率**: ≥ 70%
- **Phase 1**: 单元测试立即编写,集成测试暂缓
- **Phase 2-4**: 单元测试 + 集成测试
- **Phase 5**: 完整测试套件

**参见**: [测试计划.md 第2节](./测试计划.md#2-测试执行策略)

---

### 任务依赖

**串行依赖**:
1. 项目初始化 → 基础框架 → 核心功能
2. HTTP Server → 所有功能实现
3. 工具类 → 所有服务实现

**并行执行**:
- 重构/导航/分析服务可并行开发
- Phase 2-4 各模块可并行开发

**参见**: [实现任务文档.md 执行策略](./实现任务文档.md#执行策略说明)

---

## 📌 常用链接

### 外部文档

- [IntelliJ Platform SDK](https://plugins.jetbrains.com/docs/intellij/)
- [MCP 协议规范](https://modelcontextprotocol.io/)
- [Gradle 文档](https://docs.gradle.org/)
- [TypeScript 文档](https://www.typescriptlang.org/docs/)
- [Undertow 文档](https://undertow.io/documentation.html)

### 工具

- [JetBrains Slack](https://plugins.jetbrains.com/slack)
- [MCP Inspector](https://github.com/modelcontextprotocol/inspector)
- [Postman](https://www.postman.com/)

---

## 📝 文档统计

| 文档 | 章节数 | 页数(估) | 字数(估) | 代码示例 |
|------|-------|---------|---------|---------|
| 需求文档.md | 9 | 40 | 15,000 | 10 |
| 架构文档.md | 11 | 50 | 18,000 | 30 |
| 实现任务文档.md | 5 | 45 | 12,000 | 0 |
| 开发环境配置指南.md | 12 | 35 | 12,000 | 50 |
| Gradle配置示例.md | 9 | 30 | 10,000 | 20 |
| API端点清单.md | 12 | 40 | 15,000 | 40 |
| stdio通信示例.md | 9 | 30 | 10,000 | 30 |
| 测试计划.md | 12 | 35 | 12,000 | 15 |
| **总计** | **79** | **305** | **104,000** | **195** |

---

## ✅ 文档完成度

| 文档 | 状态 | 完成度 | 备注 |
|------|------|--------|------|
| 需求文档.md | ✅ 完成 | 100% | 含完整错误码 |
| 架构文档.md | ✅ 完成 | 100% | 含HTTP启动策略和stdio示例 |
| 实现任务文档.md | ✅ 完成 | 100% | Phase 1-4 已全部完成 |
| 开发环境配置指南.md | ✅ 完成 | 100% | 详细的环境搭建步骤 |
| Gradle配置示例.md | ✅ 完成 | 100% | 可直接使用的配置 |
| API端点清单.md | ✅ 完成 | 100% | 34个端点完整定义 |
| stdio通信示例.md | ✅ 完成 | 100% | 完整TypeScript实现 |
| 测试计划.md | ✅ 完成 | 100% | 完整测试策略 |
| 快速开始指南.md | ✅ 完成 | 100% | 5分钟快速上手 ⭐ |
| README.md | ✅ 完成 | 100% | 项目概述和快速开始 |
| CHANGELOG.md | ✅ 完成 | 100% | 版本变更历史 |
| CLAUDE.md | ✅ 完成 | 100% | AI助手开发指南 |

---

## 🎉 总结

本项目文档体系包含 **12个核心文档**,涵盖:
- ✅ 需求定义 (完整功能需求和错误码)
- ✅ 系统架构 (HTTP启动策略和stdio通信)
- ✅ 实现计划 (Phase 1-4 已全部完成 100%)
- ✅ 开发配置 (环境搭建和Gradle配置)
- ✅ API 文档 (34个端点和26个错误码)
- ✅ 通信示例 (完整TypeScript实现)
- ✅ 测试计划 (完整测试策略)
- ✅ 快速上手 (快速开始指南.md) ⭐
- ✅ 项目概述 (README.md)
- ✅ 版本历史 (CHANGELOG.md)
- ✅ AI 开发 (CLAUDE.md)
- ✅ 文档导航 (文档索引.md)

**文档总字数**: 约 12 万字
**代码示例**: 约 200+ 个
**文档完成度**: 100% (12/12)

**项目状态**: ✅ Phase 1-4 核心功能已全部完成 (259个任务,完成率100%)

**下一步**: Phase 5 优化完善（可选）、集成测试、部署准备 🚀

---

**文档维护**: 本索引需要与其他文档保持同步更新。

---

## 🚀 项目当前状态

**核心开发进度**:
- ✅ Phase 1 (MVP基础功能): 100% 完成
- ✅ Phase 2 (核心重构功能): 100% 完成
- ✅ Phase 3 (调试功能): 100% 完成
- ✅ Phase 4 (高级功能): 100% 完成
- ⏳ Phase 5 (优化完善): 待开始（可选）

**总完成任务**: 259/259 (核心任务)

**当前版本**: 1.0.0-SNAPSHOT

**最后更新**: 2025-11-29
