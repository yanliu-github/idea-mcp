# å¿«é€Ÿå¼€å§‹æŒ‡å—

**5åˆ†é’Ÿä¸Šæ‰‹ IntelliJ IDEA MCP Server**

---

## ğŸ“‹ å‰ææ¡ä»¶

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²å®‰è£…ï¼š

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” |
|------|---------|------|
| JDK | 17+ | è¿è¡Œ IDEA Plugin |
| IntelliJ IDEA | 2024.1+ | å¼€å‘ç¯å¢ƒ |
| Node.js | 18+ | è¿è¡Œ MCP Server |
| Git | æœ€æ–°ç‰ˆ | å…‹éš†é¡¹ç›® |

**æ£€æŸ¥ç‰ˆæœ¬**:
```bash
java -version      # åº”æ˜¾ç¤º 17 æˆ–æ›´é«˜
node -v            # åº”æ˜¾ç¤º v18 æˆ–æ›´é«˜
git --version      # ç¡®è®¤å·²å®‰è£…
```

---

## ğŸš€ 5æ­¥å¿«é€Ÿå¯åŠ¨

### ç¬¬1æ­¥ï¼šå…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd idea-mcp
```

### ç¬¬2æ­¥ï¼šæ„å»º IDEA Plugin

```bash
# Windows
.\gradlew build

# macOS/Linux
./gradlew build
```

**é¢„è®¡æ—¶é—´**: 2-3 åˆ†é’Ÿï¼ˆé¦–æ¬¡è¿è¡Œéœ€ä¸‹è½½ä¾èµ–ï¼‰

### ç¬¬3æ­¥ï¼šå¯åŠ¨ IDEA æ²™ç®±

```bash
# Windows
.\gradlew runIde

# macOS/Linux
./gradlew runIde
```

è¿™å°†å¯åŠ¨ä¸€ä¸ªæ–°çš„ IntelliJ IDEA å®ä¾‹ï¼Œæ’ä»¶å·²è‡ªåŠ¨å®‰è£…ã€‚

**æ’ä»¶è‡ªåŠ¨å¯åŠ¨**: HTTP Server ä¼šåœ¨ IDEA å¯åŠ¨åè‡ªåŠ¨è¿è¡Œåœ¨ç«¯å£ `58888`ã€‚

### ç¬¬4æ­¥ï¼šæ„å»º MCP Server

åœ¨æ–°ç»ˆç«¯çª—å£ä¸­ï¼š

```bash
cd mcp-server
npm install
npm run build
```

**é¢„è®¡æ—¶é—´**: 1-2 åˆ†é’Ÿ

### ç¬¬5æ­¥ï¼šé…ç½® Claude Code

ç¼–è¾‘ Claude Code é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  MCP Serverï¼š

**é…ç½®æ–‡ä»¶ä½ç½®**:
- Windows: `%APPDATA%\Claude\claude_desktop_config.json`
- macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
- Linux: `~/.config/claude/claude_desktop_config.json`

**æ·»åŠ é…ç½®**:
```json
{
  "mcpServers": {
    "idea-mcp": {
      "command": "node",
      "args": ["<é¡¹ç›®è·¯å¾„>/mcp-server/dist/index.js"],
      "env": {
        "IDEA_API_URL": "http://localhost:58888"
      }
    }
  }
}
```

**é‡è¦**: å°† `<é¡¹ç›®è·¯å¾„>` æ›¿æ¢ä¸ºä½ çš„å®é™…é¡¹ç›®è·¯å¾„ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰ã€‚

### ç¬¬6æ­¥ï¼šéªŒè¯å®‰è£…

**æ£€æŸ¥ HTTP Server**:
```bash
curl http://localhost:58888/api/v1/health
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "data": {
    "status": "ok",
    "ideaVersion": "2024.1.1",
    "indexReady": true
  }
}
```

**åœ¨ Claude Code ä¸­æµ‹è¯•**:
1. é‡å¯ Claude Codeï¼ˆé‡æ–°åŠ è½½ MCP Serverï¼‰
2. åœ¨å¯¹è¯ä¸­è¾“å…¥ï¼š
   ```
   å¸®æˆ‘é‡å‘½å src/Main.java ä¸­ç¬¬ 10 è¡Œçš„å˜é‡ foo ä¸º bar
   ```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼ŒClaude Code ä¼šè°ƒç”¨ IDEA MCP Server çš„é‡å‘½ååŠŸèƒ½ï¼

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

### 1. é‡å‘½åç¬¦å·

**Claude Code ç¤ºä¾‹**:
```
é‡å‘½å src/com/example/User.java ä¸­çš„ç±» User ä¸º Customer
```

**MCP å·¥å…·**: `refactor_rename`

### 2. æŸ¥æ‰¾ç”¨é€”

**Claude Code ç¤ºä¾‹**:
```
æŸ¥æ‰¾ src/com/example/Service.java ä¸­ getUserById æ–¹æ³•çš„æ‰€æœ‰ç”¨é€”
```

**MCP å·¥å…·**: `navigate_find_usages`

### 3. ä»£ç æ£€æŸ¥

**Claude Code ç¤ºä¾‹**:
```
è¿è¡Œä»£ç æ£€æŸ¥ï¼Œæ‰¾å‡º src/com/example/Main.java ä¸­çš„æ‰€æœ‰é—®é¢˜
```

**MCP å·¥å…·**: `analyze_inspections`

### 4. æå–æ–¹æ³•

**Claude Code ç¤ºä¾‹**:
```
å°† src/Main.java ç¬¬ 20-25 è¡Œæå–ä¸ºåä¸º calculateTotal çš„æ–¹æ³•
```

**MCP å·¥å…·**: `refactor_extract_method`

---

## ğŸ“š å®Œæ•´åŠŸèƒ½åˆ—è¡¨

| åˆ†ç±» | åŠŸèƒ½ | MCP å·¥å…·æ•°é‡ |
|------|------|------------|
| **é‡æ„** | é‡å‘½åã€æå–æ–¹æ³•ã€æå–å˜é‡ã€å†…è”ã€æ”¹å˜ç­¾åã€å®‰å…¨åˆ é™¤ã€ç§»åŠ¨ | 7 |
| **å¯¼èˆª** | æŸ¥æ‰¾ç”¨é€”ã€è·³è½¬å®šä¹‰ã€ç±»å‹å±‚æ¬¡ã€è°ƒç”¨å±‚æ¬¡ã€æŸ¥æ‰¾å®ç° | 5 |
| **åˆ†æ** | ä»£ç æ£€æŸ¥ã€ä¾èµ–åˆ†æã€å¾ªç¯ä¾èµ–æ£€æµ‹ | 3 |
| **è°ƒè¯•** | æ–­ç‚¹ç®¡ç†ã€ä¼šè¯æ§åˆ¶ã€è¡¨è¾¾å¼è®¡ç®—ã€å˜é‡æŸ¥çœ‹ã€è°ƒç”¨æ ˆ | 9 |
| **ä»£ç ç”Ÿæˆ** | Getter/Setterã€æ„é€ å‡½æ•°ã€toString/equals/hashCodeã€é‡å†™æ–¹æ³• | 4 |
| **æœç´¢** | å…¨å±€æœç´¢ã€æ–‡æœ¬æœç´¢ã€ç»“æ„åŒ–æœç´¢ | 3 |
| **ç‰ˆæœ¬æ§åˆ¶** | VCSçŠ¶æ€ã€å†å²ã€å·®å¼‚ã€Blame | 4 |
| **é¡¹ç›®ç®¡ç†** | é¡¹ç›®ç»“æ„ã€æ¨¡å—ã€åº“ã€æ„å»ºé…ç½® | 4 |
| **å·¥å…·** | æ ¼å¼åŒ–ã€ä¼˜åŒ–å¯¼å…¥ã€å¿«é€Ÿä¿®å¤ã€Intention | 4 |

**æ€»è®¡**: 32+ MCP å·¥å…·ï¼Œ34 ä¸ª HTTP API ç«¯ç‚¹

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ç«¯å£ 58888 å·²è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€ IDEA æ²™ç®±
2. è¿›å…¥ `Settings > Tools > IDEA MCP Server`
3. ä¿®æ”¹ç«¯å£å·ï¼ˆä¾‹å¦‚ 58889ï¼‰
4. é‡å¯ HTTP Server
5. æ›´æ–° Claude Code é…ç½®ä¸­çš„ `IDEA_API_URL`

### Q2: MCP Server è¿æ¥å¤±è´¥ï¼Ÿ

**æ£€æŸ¥æ¸…å•**:
- âœ… IDEA æ²™ç®±æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Ÿ
- âœ… HTTP Server æ˜¯å¦å¯åŠ¨ï¼Ÿï¼ˆæ£€æŸ¥ IDEA æ—¥å¿—ï¼‰
- âœ… ç«¯å£ 58888 æ˜¯å¦å¯è®¿é—®ï¼Ÿï¼ˆ`curl http://localhost:58888/api/v1/health`ï¼‰
- âœ… Claude Code é…ç½®è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Ÿï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰
- âœ… æ˜¯å¦é‡å¯äº† Claude Codeï¼Ÿ

### Q3: é¡¹ç›®ç´¢å¼•æœªå°±ç»ªï¼Ÿ

**ç°è±¡**: API è¿”å› `INDEX_NOT_READY` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. ç­‰å¾… IDEA å®Œæˆé¡¹ç›®ç´¢å¼•ï¼ˆæŸ¥çœ‹ IDEA å³ä¸‹è§’è¿›åº¦æ¡ï¼‰
2. ç´¢å¼•å®Œæˆåå†æ‰§è¡Œæ“ä½œ
3. å¤§å‹é¡¹ç›®å¯èƒ½éœ€è¦æ•°åˆ†é’Ÿ

### Q4: é‡æ„æ“ä½œå¤±è´¥ï¼Ÿ

**å¸¸è§åŸå› **:
- æ–‡ä»¶è·¯å¾„é”™è¯¯ï¼ˆæ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼‰
- åç§»é‡è¶Šç•Œï¼ˆæ£€æŸ¥è¡Œå·å’Œåˆ—å·ï¼‰
- å‘½åå†²çªï¼ˆæ–°åç§°å·²å­˜åœ¨ï¼‰
- å…ƒç´ ä¸å­˜åœ¨ï¼ˆä½ç½®æ²¡æœ‰å¯é‡æ„çš„å…ƒç´ ï¼‰

**è°ƒè¯•æ–¹æ³•**:
1. æ£€æŸ¥ API è¿”å›çš„é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ IDEA æ—¥å¿—ï¼ˆ`Help > Show Log in Explorer/Finder`ï¼‰
3. æ‰‹åŠ¨åœ¨ IDEA ä¸­æ‰§è¡Œç›¸åŒæ“ä½œéªŒè¯

### Q5: å¦‚ä½•æŸ¥çœ‹ MCP Server æ—¥å¿—ï¼Ÿ

**æ–¹æ³•1**: æŸ¥çœ‹ Claude Code æ§åˆ¶å°
- æ‰“å¼€ Claude Code
- æŒ‰ `Ctrl+Shift+I`ï¼ˆæˆ– `Cmd+Option+I` on macOSï¼‰
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

**æ–¹æ³•2**: ç›´æ¥è¿è¡Œ MCP Serverï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
```bash
cd mcp-server
npm run dev
```

ç„¶åè¾“å…¥ JSON-RPC è¯·æ±‚è¿›è¡Œæµ‹è¯•ã€‚

---

## ğŸ“– ä¸‹ä¸€æ­¥

æ­å–œï¼ä½ å·²ç»æˆåŠŸå¯åŠ¨äº† IntelliJ IDEA MCP Serverã€‚

**æ·±å…¥å­¦ä¹ **:
1. ğŸ“˜ é˜…è¯» [éœ€æ±‚æ–‡æ¡£.md](./éœ€æ±‚æ–‡æ¡£.md) - äº†è§£å®Œæ•´åŠŸèƒ½
2. ğŸ“— é˜…è¯» [æ¶æ„æ–‡æ¡£.md](./æ¶æ„æ–‡æ¡£.md) - ç†è§£ç³»ç»Ÿè®¾è®¡
3. ğŸ“™ é˜…è¯» [APIç«¯ç‚¹æ¸…å•.md](./APIç«¯ç‚¹æ¸…å•.md) - æŸ¥çœ‹æ‰€æœ‰ API
4. ğŸ“• é˜…è¯» [æ–‡æ¡£ç´¢å¼•.md](./æ–‡æ¡£ç´¢å¼•.md) - å®Œæ•´æ–‡æ¡£å¯¼èˆª

**å¼€å‘è´¡çŒ®**:
- æŸ¥çœ‹ [å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md](./å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md)
- å‚è€ƒ [å®ç°ä»»åŠ¡æ–‡æ¡£.md](./å®ç°ä»»åŠ¡æ–‡æ¡£.md)ï¼ˆå·²å®Œæˆ Phase 1-4ï¼‰
- é˜…è¯» [CLAUDE.md](../CLAUDE.md)ï¼ˆAI åŠ©æ‰‹å¼€å‘æŒ‡å—ï¼‰

**é—®é¢˜åé¦ˆ**:
- GitHub Issues: `<repository-url>/issues`
- é‚®ç®±: support@example.com

---

## ğŸ‰ æˆåŠŸæ¡ˆä¾‹

### ç¤ºä¾‹1: æ‰¹é‡é‡å‘½å

**åœºæ™¯**: å°†é¡¹ç›®ä¸­æ‰€æœ‰çš„ `User` ç±»é‡å‘½åä¸º `Customer`

**Claude Code å¯¹è¯**:
```
1. æŸ¥æ‰¾é¡¹ç›®ä¸­æ‰€æœ‰åä¸º User çš„ç±»
2. é€ä¸ªé‡å‘½åä¸º Customer
3. éªŒè¯æ‰€æœ‰å¼•ç”¨å·²æ›´æ–°
```

### ç¤ºä¾‹2: ä»£ç é‡æ„

**åœºæ™¯**: æå–é‡å¤ä»£ç ä¸ºç‹¬ç«‹æ–¹æ³•

**Claude Code å¯¹è¯**:
```
åˆ†æ src/Service.java ä¸­çš„é‡å¤ä»£ç 
æå–ç¬¬ 50-60 è¡Œä¸º validateInput æ–¹æ³•
æå–ç¬¬ 80-90 è¡Œä¸º processData æ–¹æ³•
è¿è¡Œä»£ç æ£€æŸ¥ç¡®è®¤æ²¡æœ‰é—®é¢˜
```

### ç¤ºä¾‹3: è°ƒè¯•è¾…åŠ©

**åœºæ™¯**: è°ƒè¯•å¤æ‚çš„ä¸šåŠ¡é€»è¾‘

**Claude Code å¯¹è¯**:
```
åœ¨ src/Main.java ç¬¬ 25 è¡Œè®¾ç½®æ–­ç‚¹
å¯åŠ¨è°ƒè¯•ä¼šè¯
æŸ¥çœ‹å½“å‰ä½œç”¨åŸŸçš„æ‰€æœ‰å˜é‡
è®¡ç®—è¡¨è¾¾å¼ user.getName() + " - " + user.getAge()
è·å–å®Œæ•´è°ƒç”¨æ ˆ
```

---

**æœ€åæ›´æ–°**: 2025-11-29
**ç‰ˆæœ¬**: 1.0.0-SNAPSHOT
**ç»´æŠ¤è€…**: ly
